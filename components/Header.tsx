import {setToken, isAuthenticated, getPayload} from "../lib/auth";
import {useRouter} from "next/router";
import {LogoutIcon} from "@heroicons/react/outline";
import Link from "next/link";

export default function Header() {
  const router = useRouter();

  function logout() {
    setToken();
    router.push('/account/login');
  }

  return <div className='w-full bg-green-900'>
    <div className='flex items-center justify-between container mx-auto py-2 h-14'>
      <div className='flex items-center'>
        <div>
          <svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g clipPath="url(#clip0_425_55)">
              <path fillRule="evenodd" clipRule="evenodd"
                    d="M23.3242 8.24417C23.3747 7.03044 23.3494 5.81474 23.2483 4.60417C23.1833 4.1925 23.2483 3.52083 22.7392 3.16333C21.5367 2.5025 20.4967 2.91417 19.2942 2.47C19.246 1.93397 19.1068 1.41007 18.8825 0.920834C18.7152 0.760225 18.5163 0.636256 18.2984 0.55684C18.0805 0.477423 17.8485 0.444303 17.6171 0.459594C17.3857 0.474885 17.16 0.53825 16.9545 0.645646C16.7489 0.753042 16.568 0.90211 16.4233 1.08333C16.1704 1.489 16.0044 1.94273 15.9358 2.41583C14.9073 2.23551 13.8552 2.23551 12.8267 2.41583C12.7736 1.9167 12.6382 1.42981 12.4258 0.975001C12.2562 0.815366 12.0552 0.692778 11.8356 0.615031C11.616 0.537284 11.3826 0.506079 11.1503 0.523401C10.918 0.540722 10.6918 0.60619 10.4862 0.715643C10.2806 0.825095 10.0999 0.976138 9.95584 1.15917C9.74318 1.51261 9.59636 1.90168 9.52251 2.3075C8.70714 2.20522 7.87915 2.29805 7.10667 2.57833C7.0563 2.08692 6.9245 1.60731 6.71667 1.15917C6.54345 0.968665 6.323 0.827271 6.07761 0.74928C5.83222 0.671288 5.57059 0.659464 5.31917 0.715001C4.33334 0.888334 3.9325 1.69 3.75917 2.70833C3.65159 3.64712 3.59373 4.59094 3.58584 5.53584C3.60789 5.71102 3.67928 5.87633 3.79167 6.0125C4.18167 6.435 7.58334 7.49667 7.20417 3.33667C7.92103 3.51754 8.6756 3.47981 9.37084 3.22833C9.37084 3.4125 9.26251 5.1675 9.28417 5.395C9.39251 6.22917 10.1833 6.0775 10.595 6.18584C12.4258 6.64084 13.0433 5.18917 12.9025 3.2825C13.8582 3.55701 14.8718 3.55701 15.8275 3.2825C15.6108 6.5325 15.8817 5.76334 17.0625 6.08834C18.8933 6.54334 19.5108 5.08083 19.3592 3.17417C20.5183 3.48833 21.5258 3.32583 22.36 3.8025C22.4792 3.8675 22.4467 4.4525 22.4792 4.69083C22.5496 5.87062 22.5496 7.05355 22.4792 8.23334C22.4792 11.6025 23.0317 15.3942 21.8833 18.4383C20.735 21.4825 20.3883 20.3017 17.2358 20.6917C14.4408 21.0383 4.89667 21.775 2.21 20.9408C1.96084 20.865 1.41917 20.7458 1.28917 20.5292C0.76917 19.6625 1.08334 17.3333 1.08334 16.25C1.19167 6.57584 0.975003 4.81 2.16667 3.77C2.77334 3.25 3.38 3.25 3.25 2.84917C3.23675 2.8127 3.21637 2.77924 3.19005 2.75073C3.16373 2.72222 3.13201 2.69923 3.09672 2.6831C3.06143 2.66696 3.02329 2.65801 2.98451 2.65677C2.94573 2.65552 2.90709 2.662 2.87084 2.67583C1.235 3.25 0.790837 4.33334 0.595837 6.00167C0.455003 7.16084 0.41167 9.295 0.173337 16.25C0.0758365 17.615 -0.27083 19.9008 0.41167 21.0925C1.09417 22.2842 4.52834 22.4467 5.95834 22.4467C9.77741 22.5037 13.5959 22.301 17.3875 21.84C18.5011 21.8192 19.6121 21.7252 20.7133 21.5583C21.9158 21.2442 22.4467 19.9875 22.88 18.8392C24.0392 15.5025 23.3567 11.6892 23.3242 8.24417ZM5.99084 4.92917C5.79584 5.34084 5.4925 5.33 4.57167 5.2325C4.57167 5.05917 4.66917 4.79917 4.66917 4.7125C4.50932 3.71381 4.57596 2.69197 4.86417 1.7225C5.2325 1.0075 6.05584 1.47333 6.05584 1.47333C6.37768 2.60386 6.37017 3.80277 6.03417 4.92917H5.99084ZM11.7 4.75583C11.505 5.14583 11.2017 5.15667 10.2808 5.04834C10.2808 4.875 10.3783 4.615 10.3783 4.52833C10.2325 3.52641 10.314 2.50451 10.6167 1.53833C10.8333 1.08333 11.765 1.01833 11.9167 1.58167C11.9626 1.85768 11.9916 2.13627 12.0033 2.41583C12.1156 3.20528 12.0261 4.01028 11.7433 4.75583H11.7ZM18.2 4.75583C17.9942 5.15667 17.6908 5.15667 16.77 5.05917C16.8783 3.06583 16.6725 2.32917 17.0733 1.53833C17.3117 1.0725 18.1567 0.996668 18.3408 1.53833C18.5635 2.587 18.5188 3.67481 18.2108 4.70167L18.2 4.75583Z"
                    fill="white"/>
              <path
                d="M24.57 6.00166C24.4833 9.13249 24.57 12.2525 24.57 15.3833C24.57 16.8675 24.6675 18.3733 24.6242 19.8683C24.6946 20.5663 24.4893 21.2642 24.052 21.8128C23.6148 22.3614 22.9803 22.7172 22.2842 22.8042C19.2816 23.3651 16.2453 23.727 13.195 23.8875C11.7217 23.9958 10.2375 24.115 8.76417 24.1367C7.29084 24.1583 5.61167 23.8117 4.21417 24.2342C3.85667 24.3425 3.705 24.9275 4.095 25.1008C5.61181 25.5295 7.19505 25.6728 8.76417 25.5233C10.5192 25.5233 12.2417 25.5233 13.9967 25.4692C15.7517 25.415 17.3442 25.1658 19.0125 24.9275C20.5872 24.8114 22.1374 24.4721 23.6167 23.92C26.455 22.5875 26 19.435 26 16.8025C25.9242 13.2058 25.8808 9.59832 25.6533 5.96916C25.6353 5.84552 25.5734 5.73249 25.479 5.65074C25.3845 5.569 25.2637 5.52402 25.1388 5.52402C25.0138 5.52402 24.893 5.569 24.7986 5.65074C24.7041 5.73249 24.6422 5.84552 24.6242 5.96916L24.57 6.00166Z"
                fill="white"/>
            </g>
            <defs>
              <clipPath id="clip0_425_55">
                <rect width="26" height="26" fill="white"/>
              </clipPath>
            </defs>
          </svg>
        </div>

        <h1 className='text-white font-bold ml-4'>Quiz App</h1>
        {isAuthenticated() &&
            <>
                <div className='w-px h-full h-6 bg-white mx-4'/>
                <p className='text-white text-xs capitalize'>{getPayload()?.role} Portal</p>
            </>
        }
      </div>

      {
        isAuthenticated() && getPayload()?.role === 'teacher' && <>
              <div className='flex items-center space-x-4 justify-center'>
                  <Link href={'/teacher/quiz'}>
                      <button
                          className={`duration-200 flex justify-center py-2 px-4 cursor-pointer border border-transparent uppercase rounded shadow-sm text-sm font-bold bg-green-900 hover:bg-green-700 ${router.pathname.startsWith('/teacher/quiz') ? 'text-yellow-200' : 'text-white'}`}>Quiz
                      </button>
                  </Link>
                  <Link href={'/teacher/student'}>
                      <button
                          className={`duration-200 flex justify-center py-2 px-4 cursor-pointer border border-transparent uppercase rounded shadow-sm text-sm font-bold bg-green-900 hover:bg-green-700 ${router.pathname.startsWith('/teacher/student') ? 'text-yellow-200' : 'text-white'}`}>Student
                      </button>
                  </Link>
              </div>
          </>
      }

      {isAuthenticated() && <button className='justify-self-end btn-primary space-x-2' onClick={logout}>
          <LogoutIcon className='h-5 w-auto'/>
          <span>Sign out</span>
      </button>}
    </div>
  </div>;
}
